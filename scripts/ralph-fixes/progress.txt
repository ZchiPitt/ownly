## 2026-01-30 22:32 PST - US-FIX-005
- Implemented source_batch_id tracking for multi-item captures and shared-photo UI in gallery + item detail views.
- Files changed: supabase/migrations/20260131000001_add_source_batch_id.sql, src/types/database.ts, src/pages/AddItemPage.tsx, src/pages/ItemEditorPage.tsx, src/hooks/useInventoryItems.ts, src/components/GalleryGrid.tsx, src/pages/ItemDetailPage.tsx
- **Learnings for future iterations:**
  - Use source_batch_id to group multi-item captures; shared-photo counts are derived by counting items with the same batch ID and subtracting 1 for the current item.
  - Item detail related items query should filter by user_id and deleted_at is null, excluding the current item.
---
## 2026-01-31 09:45 PST - US-FIX-008
- Added color tag utilities and TagChip component to render color dots/tinted chips across tags input, item detail, gallery, and search results.
- Updated inventory item query/types to include tags for gallery tag previews.
- Files changed: src/lib/colorUtils.ts, src/components/TagChip.tsx, src/components/TagsInput.tsx, src/components/GalleryGrid.tsx, src/components/SearchResult.tsx, src/pages/ItemDetailPage.tsx, src/hooks/useInventoryItems.ts
---
## 2026-01-31 10:15 PST - US-FIX-006
- Added AI bbox parsing on analyze-image edge function and defaulted invalid/missing bboxes to full image.
- Implemented bbox validation + crop-to-bbox thumbnail generation (200x200) with fallback to full image and storage uploads.
- Wired per-item thumbnails through add flow (multi-item, quick add, editor queue) with cleanup on cancel.
- Files changed: supabase/functions/analyze-image/index.ts, src/types/api.ts, src/lib/imageUtils.ts, src/pages/AddItemPage.tsx, src/pages/ItemEditorPage.tsx
---
## 2026-01-30 23:50 PST - US-FIX-006
- Verified production build (`npm run build`).
---
## 2026-01-30 23:54 PST - US-FIX-006
- Verified production build (`npm run build`).
---
